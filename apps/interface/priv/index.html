<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <link rel="stylesheet" href="/static/font-face.css"></link>
        <link rel="stylesheet" href="/static/mdl/material.min.css"></link>
        <script src="/static/mdl/material.min.js"></script>
        <script src="/app.js"></script>
        <title>Rosetta Home 2.0</title>
    </head>
    <body>
        <script type="text/javascript">
            var app = Elm.Main.fullscreen();
            console.log(app.ports);
            app.ports.getColor.subscribe(function(event){
                var id = event.cls + "svg";
                var c = document.getElementById(event.cls + "svg");
                var ctx = c.getContext("2d");
                ctx.clearRect(0, 0, c.scrollWidth, c.height);
                var g = ctx.createLinearGradient(0,0,c.scrollWidth,0);
                for(i=0; i<10; i++){
                    g.addColorStop(((i+1)*0.1), "hsla("+(i*40)+", 100%, 50%, 1.0)")
                }
                ctx.fillStyle = g
                ctx.fillRect(0, 0, c.scrollWidth, c.height);
                var g_a = ctx.createLinearGradient(0, 0, 0, c.height);
                g_a.addColorStop(0, "hsla("+(i*40)+", 100%, 100%, 0)");
                g_a.addColorStop(1, "hsla("+(i*40)+", 100%, 100%, 1)");
                ctx.fillStyle = g_a
                ctx.fillRect(0, 0, c.scrollWidth, c.height);
                var imgData = ctx.getImageData(Math.round((event.relPos.x/c.scrollWidth)*300), event.relPos.y, 1, 1);
                app.ports.gotColor.send("#FFFFFF");
            });
        </script>
    </body>
</html>
